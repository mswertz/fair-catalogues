name: Variables
tables:
  - name: "Variables"
    description: "Definition of a non-repeated variable, or of the first variable from\
      \ a repeated range"
    maelstrom:
      name: dsch_variables
    columns:
      - name: "release"
        key: 1
        required: true
        refTable: "Releases"
        refJsTemplate: "${resource.acronym}.${version}"
        description: "release this table definition is part of"
        columnType: "REF"
        inherited: true
        maelstrom:
          name: dataschema
        molgenis:
          name: release
      - name: "table"
        key: 1
        required: true
        refTable: "Tables"
        refLink: "release"
        refJsTemplate: "${name}"
        description: "table this variable is part of"
        columnType: "REF"
        inherited: true
        maelstrom:
          name: dataset
      - name: "name"
        key: 1
        required: true
        description: "name of the variable, unique within a table"
        columnType: "STRING"
        inherited: true
        maelstrom:
          name: dsch_var_name
          description: Name of the DataSchema variable
          info: "Harmonized variable is a core variable (common format) generated by multiple studies.

                                Written as : [Area of Information]_[Variable Informations] ; can also include data collection event or source of information (to be established for each dataschema)

                                - under 32 characters
                                - words separated by under-score (« _ »)
                                - favor lowercase letters

                                Standard prefix on the Nomenclature Sheet"
      - name: "collectionEvent"
        refTable: "CollectionEvents"
        refJsTemplate: "${resource.acronym}.${name}"
        description: "in case of protocolised data collection this defines the moment\
        \ in time this variable is collected on"
        columnType: "REF"
        inherited: true
      - name: "label"
        columnType: "STRING"
        maelstrom:
          name: dsch_var_label
          description: Short description (label) of DataSchema variable
          info: "Can include:
                        - scales
                        - self-reported/measured
                        - data collection event
                        - reference to the period covered by the variable collected (e.g. Current, Lifetime)
                        - length: maximum of 255 characters."
      - name: "format"
        refTable: "Formats"
        refJsTemplate: "${name}"
        description: "string,int,decimal,date,datetime etc"
        columnType: "REF"
        maelstrom:
          name: dsch_var_type
          description: Type of DataSchema variable
          info: "Types include:
                        - Decimal (numerical values with a fractional component)
                        - Integer (numerical values without a fractional component) includes Category and Boolean (two possible values, usually denoted true or false)
                        - Text (alphanumerical values) (e.g. Age) includes Date (values written in a defined date format)"
      - name: "unit"
        refTable: "Units"
        refJsTemplate: "${name}"
        description: "unit ontology"
        columnType: "REF"
        maelstrom:
          name: dsch_var_unit
          description: Measurement unit of DataSchema variable
          info: "The units are written as abbreviations (e.g. cm, mmol/L)
                        For dates: YYYY-MM-DD
                        Includes currencies."
      - name: "references"
        refTable: "Variables"
        refLink: "release"
        refJsTemplate: "${table.name}.${name}"
        description: "to define foreigh key relationships between variables within or\
        \ across tables"
        columnType: "REF"
      - name: "mandatory"
        description: "whether this variable is required within this collection"
        columnType: "BOOL"
      - name: "description"
        columnType: "TEXT"
        maelstrom:
          name: dsch_var_description
          description: Full description of DataSchema variable to inform the precise nature and scientific meaning of the harmonized variables to be created. Full sentences.
          info: "Can include:
                        - The target population (e.g. for women only)
                        - The context of measurement (e.g. self-reported measure, measure by a trained professional)
                        - Information related to the protocol (e.g. measure taken when the participant is at rest)
                        - The reference period (e.g. currently, in the past week)
                        - Harmonization decisions taken to generate the DataSchema variable
                        - General information from study-specific study design that would affect harmonization (e.g. Study A excluded participants who are diagnosed with cancer)"
      - name: "order"
        description: "to sort variables you can optionally add an order value"
        columnType: "INT"
        maelstrom:
          name: dsch_index
          description: Rank of DataSchema variable (order in the list )

      - name: "exampleValues"
        columnType: "STRING_ARRAY"
      - name: "permittedValues"
        refTable: "VariableValues"
        mappedBy: "variable"
        refJsTemplate: "${release.resource.acronym}.${release.version}.${variable.table.name}.${variable.name}.${value}"
        columnType: "REFBACK"
      - name: "contents"
        refTable: "Contents"
        refJsTemplate: "${name}"
        columnType: "REF_ARRAY"
      - name: "repeats"
        refTable: "RepeatedVariables"
        mappedBy: "isRepeatOf"
        refJsTemplate: "${release.resource.acronym}.${release.version}.${table.name}.${name}"
        description: "listing of all repeated variables defined for this variable"
        columnType: "REFBACK"
      - name: "vocabularies"
        refTable: "Vocabularies"
        refJsTemplate: "${name}"
        columnType: "REF_ARRAY"
  - name: "RepeatedVariables"
    description: "Definition of a repeated variable. Refers to another variable for\
      \ its definition."
    columns:
      - name: "release"
        key: 1
        required: true
        refTable: "Releases"
        refJsTemplate: "${resource.acronym}.${version}"
        description: "release this table definition is part of"
        columnType: "REF"
        inherited: true
      - name: "table"
        key: 1
        required: true
        refTable: "Tables"
        refLink: "release"
        refJsTemplate: "${name}"
        description: "table this variable is part of"
        columnType: "REF"
        inherited: true
      - name: "name"
        key: 1
        required: true
        description: "name of the variable, unique within a table"
        columnType: "STRING"
        inherited: true
      - name: "collectionEvent"
        refTable: "CollectionEvents"
        refJsTemplate: "${resource.acronym}.${name}"
        description: "in case of protocolised data collection this defines the moment\
        \ in time this variable is collected on"
        columnType: "REF"
        inherited: true
      - name: "mg_tableclass"
        columnType: "STRING"
        inherited: true
      - name: "mappings"
        refTable: "VariableMappings"
        mappedBy: "toVariable"
        refJsTemplate: "${fromRelease.resource.acronym}.${fromRelease.version}.${fromTable.name}.${toRelease.resource.acronym}.${toRelease.version}.${toTable.name}.${toVariable.name}"
        description: "listing of the VariableMappings defined between this variable and\
        \ standard/harmonized variables"
        columnType: "REFBACK"
        inherited: true
      - name: "isRepeatOf"
        required: true
        refTable: "Variables"
        refLink: "release"
        refJsTemplate: "${table.name}.${name}"
        description: "reference to the definition of the variable that is being repeated"
        columnType: "REF"
  - name: "Tables"
    description: "Definition of a table within a data release"
    columns:
      - name: "release"
        key: 1
        required: true
        refTable: "Releases"
        refJsTemplate: "${resource.acronym}.${version}"
        description: "resource + version this table is defined for"
        columnType: "REF"
      - name: "name"
        key: 1
        required: true
        description: "unique name in the release"
        columnType: "STRING"
      - name: "label"
        description: "short human readible description"
        columnType: "STRING"
      - name: "unitOfObservation"
        refTable: "ObservationTargets"
        refJsTemplate: "${name}"
        description: "defines what each record in this table describes"
        columnType: "REF"
      - name: "contents"
        refTable: "Contents"
        refJsTemplate: "${name}"
        description: "enables grouping of table list into topic and to display tables\
        \ in a tree"
        columnType: "REF_ARRAY"
      - name: "description"
        description: "description of the role/function of this table"
        columnType: "TEXT"
      - name: "numberOfRows"
        description: "count of the numbe of records in this table"
        columnType: "INT"
      - name: "mappings"
        refTable: "TableMappings"
        mappedBy: "toTable"
        refJsTemplate: "${fromRelease.resource.acronym}.${fromRelease.version}.${fromTable.name}.${toRelease.resource.acronym}.${toRelease.version}.${toTable.name}"
        description: "list of mappings between this table and standard/harmonized tables"
        columnType: "REFBACK"
      - name: "mappingsTo"
        refTable: "TableMappings"
        mappedBy: "fromTable"
        refJsTemplate: "${fromRelease.resource.acronym}.${fromRelease.version}.${fromTable.name}.${toRelease.resource.acronym}.${toRelease.version}.${toTable.name}"
        columnType: "REFBACK"
  - name: "VariableValues"
    description: "Listing of categorical value+label definition in case of a categorical\
      \ variable"
    columns:
      - name: "release"
        key: 1
        required: true
        refTable: "Releases"
        refJsTemplate: "${resource.acronym}.${version}"
        columnType: "REF"
      - name: "variable"
        key: 1
        required: true
        refTable: "Variables"
        refLink: "release"
        refJsTemplate: "${table.name}.${name}"
        description: "e.g. PATO"
        columnType: "REF"
      - name: "value"
        key: 1
        required: true
        description: "e.g. '1'"
        columnType: "STRING"
      - name: "label"
        required: true
        columnType: "STRING"
      - name: "order"
        columnType: "INT"
      - name: "isMissing"
        columnType: "BOOL"
      - name: "ontologyTermIRI"
        description: "reference to ontology term that defines this categorical value"
        columnType: "STRING"
  - name: "Vocabularies"
    inherit: "OntologyTerms"
    columns:
      - name: "name"
        key: 1
        required: true
        columnType: "STRING"
        inherited: true
      - name: "code"
        key: 2
        description: "identifier used for this code with the ontology"
        columnType: "STRING"
        inherited: true
      - name: "order"
        columnType: "INT"
        inherited: true
      - name: "definition"
        columnType: "TEXT"
        inherited: true
      - name: "comments"
        columnType: "TEXT"
        inherited: true
      - name: "parent"
        refTable: "OntologyTerms"
        refJsTemplate: "${name}"
        description: "link to a more broad term"
        columnType: "REF"
        inherited: true
      - name: "ontologyTermURI"
        key: 3
        columnType: "STRING"
        inherited: true
      - name: "children"
        refTable: "OntologyTerms"
        mappedBy: "parent"
        refJsTemplate: "${name}"
        description: "link to more specific terms"
        columnType: "REFBACK"
        inherited: true
      - name: "mg_tableclass"
        columnType: "STRING"
        inherited: true
