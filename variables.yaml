name: Variables
tables:
  - name: "Variables"
    description: "Definition of a non-repeated variable, or of the first variable from\
      \ a repeated range"
    maelstrom:
      name: dsch_variables
    molgenis:
      name: variables
    columns:
      - name: "schema"
        description: name and version of a data schema (can be collected, or harmonized)
        key: 1
        required: true
        maelstrom:
          name: dataschema / study_dataset
        molgenis:
          name: release
      - name: "table"
        description: name of the table this variable is part of
        key: 1
        required: true
        inherited: true
        maelstrom:
          name: dataset (?)
        molgenis:
          name: table
          description: "table this variable is part of"
      - name: "name"
        description: name of the variable. Consider to use meaningfull naming scheme.
        key: 1
        required: true
        columnType: "STRING"
        inherited: true
        maelstrom:
          name: dsch_var_name / study_specific_var_name
          description: Name of the DataSchema variable
        molgenis:
          name: name
          description: "name of the variable, unique within a table"
      - name: "label"
        columnType: "STRING"
        maelstrom:
          name: dsch_var_label
          description: Short description (label) of DataSchema variable
      - name: "topics"
        refTable: "Topics"
        columnType: "REF_ARRAY"
        molgenis:
          name: topics
          description: annotation to indicate topic of the variable (e.g. using maelstrom areas of information)
      - name: "format"
        description: type or format of the variable
        refTable: "Formats"
        refJsTemplate: "${name}"
        columnType: "REF"
        maelstrom:
          name: dsch_var_type
          description: Type of DataSchema variable
        molgenis:
          name: format
          description: string,int,decimal,date,datetime etc
      - name: "unit"
        description: "unit ontology"
        columnType: "REF"
        maelstrom:
          name: dsch_var_unit
          description: Measurement unit of DataSchema variable
        molgenis:
          name: unit
          description: unit ontology
      - name: "collectionEvent"
        refTable: "CollectionEvents"
        refJsTemplate: "${resource.acronym}.${name}"
        description: "in case of protocolised data collection this defines the moment\
        \ in time this variable is collected on"
        columnType: "REF"
        inherited: true
      - name: "references"
        refTable: "Variables"
        molgenis:
          name: references
          description: "to define foreign key relationships between variables within or\
                               \ across tables"
      - name: "mandatory"
        columnType: "BOOL"
        molgenis:
          name: mandatory
          description: "whether this variable is required"
      - name: "description"
        columnType: "TEXT"
        maelstrom:
          name: dsch_var_description
          description: Full description of DataSchema variable to inform the precise nature and scientific meaning of the harmonized variables to be created. Full sentences.
          info: "Can include:
                        - The target population (e.g. for women only)
                        - The context of measurement (e.g. self-reported measure, measure by a trained professional)
                        - Information related to the protocol (e.g. measure taken when the participant is at rest)
                        - The reference period (e.g. currently, in the past week)
                        - Harmonization decisions taken to generate the DataSchema variable
                        - General information from study-specific study design that would affect harmonization (e.g. Study A excluded participants who are diagnosed with cancer)"
      - name: "order"
        description: "to sort variables you can optionally add an order value"
        columnType: "INT"
        maelstrom:
          name: dsch_index
          description: Rank of DataSchema variable (order in the list )
      - name: "exampleValues"
        columnType: "STRING_ARRAY"
        molgenis:
          name: exampleValues
      - name: "vocabularies"
        refTable: "Vocabularies"
        molgenis:
          name: vocabularies
          description: link to vocabulary used. E.g. ICD-10
  - name: "RepeatedVariables"
    description: "Definition of a repeated variable. Refers to another variable for\
      \ its definition but has its own collection event."
    columns:
      - name: "release (see variable)"
      - name: "table (see variable)"
      - name: "name (see variable)"
      - name: "isRepeatOf"
        required: true
        refTable: "Variables"
        description: "reference to the definition of the variable that is being repeated"
        columnType: "REF"
        molgenis:
          name: isRepeatOf
          description: "reference to the definition of the variable that is being repeated"
  - name: "VariableValues"
    description: "Listing of categorical value+label definition in case of a categorical\
      \ variable"
    maelstrom:
      name: dsch categories
    molgenis:
      name: VariableValues
      description: "Listing of categorical value+label definition in case of a categorical\
      \ variable"
    columns:
      - name: "release"
        key: 1
        required: true
        refTable: "Releases"
        refJsTemplate: "${resource.acronym}.${version}"
        columnType: "REF"
        molgenis:
          name: release
        maelstrom:
          name: dataschema
      - name: "variable"
        key: 1
        required: true
        refTable: "Variables"
        refLink: "release"
        columnType: "REF"
        molgenis:
          name: variable
        maelstrom:
          name: dsch_var_name
      - name: "value"
        key: 1
        required: true
        columnType: "STRING"
        molgenis:
          name: value
        maelstrom:
          name: dsch_var_cat_code
      - name: "label"
        required: true
        columnType: "STRING"
        molgenis:
          name: label
        maelstrom:
          name: dsch_var_cat_label
      - name: "order"
        columnType: "INT"
        molgenis:
          name: order
      - name: "isMissing"
        columnType: "BOOL"
        maelstrom:
          name: missing
        molgenis:
          name: isMissing
      - name: "ontologyTermIRI"
        description: "reference to ontology term that defines this categorical value"
        columnType: "STRING"
        molgenis:
          name: ontologyTermIRI
          description: "reference to ontology term that defines this categorical value"
  - name: "Tables"
    description: "Definition of a table within a data release"
    molgenis:
      name: Tables
    maelstrom:
      name: Datasets
    columns:
      - name: "schema"
        key: 1
        required: true
        molgenis:
          name: release
          description: "resource + version this table is defined for"
        maelstrom:
          name: dataschema
      - name: "name"
        key: 1
        required: true
        description: "unique name in the release"
        columnType: "STRING"
        maelstrom:
          name: dsch name
      - name: "label"
        description: "short human readible description"
        columnType: "STRING"
      - name: "unitOfObservation"
        refTable: "ObservationTargets"
        refJsTemplate: "${name}"
        description: "defines what each record in this table describes"
        columnType: "REF"
      - name: "contents"
        refTable: "Contents"
        refJsTemplate: "${name}"
        description: "enables grouping of table list into topic and to display tables\
        \ in a tree"
        columnType: "REF_ARRAY"
      - name: "description"
        description: "description of the role/function of this table"
        columnType: "TEXT"
      - name: "numberOfRows"
        description: "count of the numbe of records in this table"
        columnType: "INT"
      - name: "mappings"
        refTable: "TableMappings"
        mappedBy: "toTable"
        refJsTemplate: "${fromRelease.resource.acronym}.${fromRelease.version}.${fromTable.name}.${toRelease.resource.acronym}.${toRelease.version}.${toTable.name}"
        description: "list of mappings between this table and standard/harmonized tables"
        columnType: "REFBACK"
      - name: "mappingsTo"
        refTable: "TableMappings"
        mappedBy: "fromTable"
        refJsTemplate: "${fromRelease.resource.acronym}.${fromRelease.version}.${fromTable.name}.${toRelease.resource.acronym}.${toRelease.version}.${toTable.name}"
        columnType: "REFBACK"
  - name: "Vocabularies"
    inherit: "OntologyTerms"
    columns:
      - name: "name"
        key: 1
        required: true
        columnType: "STRING"
        inherited: true
      - name: "code"
        key: 2
        description: "identifier used for this code with the ontology"
        columnType: "STRING"
        inherited: true
      - name: "order"
        columnType: "INT"
        inherited: true
      - name: "definition"
        columnType: "TEXT"
        inherited: true
      - name: "comments"
        columnType: "TEXT"
        inherited: true
      - name: "parent"
        refTable: "OntologyTerms"
        refJsTemplate: "${name}"
        description: "link to a more broad term"
        columnType: "REF"
        inherited: true
      - name: "ontologyTermURI"
        key: 3
        columnType: "STRING"
        inherited: true
      - name: "children"
        refTable: "OntologyTerms"
        mappedBy: "parent"
        refJsTemplate: "${name}"
        description: "link to more specific terms"
        columnType: "REFBACK"
        inherited: true
      - name: "mg_tableclass"
        columnType: "STRING"
        inherited: true
